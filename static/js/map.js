
var data = '{"ad":{"lat":"42.5000","long":"1.5000"},"ae":{"lat":"24.0000","long":"54.0000"},"af":{"lat":"33.0000","long":"65.0000"},"ag":{"lat":"17.0500","long":"-61.8000"},"ai":{"lat":"18.2500","long":"-63.1667"},"al":{"lat":"41.0000","long":"20.0000"},"am":{"lat":"40.0000","long":"45.0000"},"an":{"lat":"12.2500","long":"-68.7500"},"ao":{"lat":"-12.5000","long":"18.5000"},"ap":{"lat":"35.0000","long":"105.0000"},"aq":{"lat":"-90.0000","long":"0.0000"},"ar":{"lat":"-34.0000","long":"-64.0000"},"as":{"lat":"-14.3333","long":"-170.0000"},"at":{"lat":"47.3333","long":"13.3333"},"au":{"lat":"-27.0000","long":"133.0000"},"aw":{"lat":"12.5000","long":"-69.9667"},"az":{"lat":"40.5000","long":"47.5000"},"ba":{"lat":"44.0000","long":"18.0000"},"bb":{"lat":"13.1667","long":"-59.5333"},"bd":{"lat":"24.0000","long":"90.0000"},"be":{"lat":"50.8333","long":"4.0000"},"bf":{"lat":"13.0000","long":"-2.0000"},"bg":{"lat":"43.0000","long":"25.0000"},"bh":{"lat":"26.0000","long":"50.5500"},"bi":{"lat":"-3.5000","long":"30.0000"},"bj":{"lat":"9.5000","long":"2.2500"},"bm":{"lat":"32.3333","long":"-64.7500"},"bn":{"lat":"4.5000","long":"114.6667"},"bo":{"lat":"-17.0000","long":"-65.0000"},"br":{"lat":"-10.0000","long":"-55.0000"},"bs":{"lat":"24.2500","long":"-76.0000"},"bt":{"lat":"27.5000","long":"90.5000"},"bv":{"lat":"-54.4333","long":"3.4000"},"bw":{"lat":"-22.0000","long":"24.0000"},"by":{"lat":"53.0000","long":"28.0000"},"bz":{"lat":"17.2500","long":"-88.7500"},"ca":{"lat":"60.0000","long":"-95.0000"},"cc":{"lat":"-12.5000","long":"96.8333"},"cd":{"lat":"0.0000","long":"25.0000"},"cf":{"lat":"7.0000","long":"21.0000"},"cg":{"lat":"-1.0000","long":"15.0000"},"ch":{"lat":"47.0000","long":"8.0000"},"ci":{"lat":"8.0000","long":"-5.0000"},"ck":{"lat":"-21.2333","long":"-159.7667"},"cl":{"lat":"-30.0000","long":"-71.0000"},"cm":{"lat":"6.0000","long":"12.0000"},"cn":{"lat":"35.0000","long":"105.0000"},"co":{"lat":"4.0000","long":"-72.0000"},"cr":{"lat":"10.0000","long":"-84.0000"},"cu":{"lat":"21.5000","long":"-80.0000"},"cv":{"lat":"16.0000","long":"-24.0000"},"cx":{"lat":"-10.5000","long":"105.6667"},"cy":{"lat":"35.0000","long":"33.0000"},"cz":{"lat":"49.7500","long":"15.5000"},"de":{"lat":"51.0000","long":"9.0000"},"dj":{"lat":"11.5000","long":"43.0000"},"dk":{"lat":"56.0000","long":"10.0000"},"dm":{"lat":"15.4167","long":"-61.3333"},"do":{"lat":"19.0000","long":"-70.6667"},"dz":{"lat":"28.0000","long":"3.0000"},"ec":{"lat":"-2.0000","long":"-77.5000"},"ee":{"lat":"59.0000","long":"26.0000"},"eg":{"lat":"27.0000","long":"30.0000"},"eh":{"lat":"24.5000","long":"-13.0000"},"er":{"lat":"15.0000","long":"39.0000"},"es":{"lat":"40.0000","long":"-4.0000"},"et":{"lat":"8.0000","long":"38.0000"},"eu":{"lat":"47.0000","long":"8.0000"},"fi":{"lat":"64.0000","long":"26.0000"},"fj":{"lat":"-18.0000","long":"175.0000"},"fk":{"lat":"-51.7500","long":"-59.0000"},"fm":{"lat":"6.9167","long":"158.2500"},"fo":{"lat":"62.0000","long":"-7.0000"},"fr":{"lat":"46.0000","long":"2.0000"},"ga":{"lat":"-1.0000","long":"11.7500"},"gb":{"lat":"54.0000","long":"-2.0000"},"gd":{"lat":"12.1167","long":"-61.6667"},"ge":{"lat":"42.0000","long":"43.5000"},"gf":{"lat":"4.0000","long":"-53.0000"},"gh":{"lat":"8.0000","long":"-2.0000"},"gi":{"lat":"36.1833","long":"-5.3667"},"gl":{"lat":"72.0000","long":"-40.0000"},"gm":{"lat":"13.4667","long":"-16.5667"},"gn":{"lat":"11.0000","long":"-10.0000"},"gp":{"lat":"16.2500","long":"-61.5833"},"gq":{"lat":"2.0000","long":"10.0000"},"gr":{"lat":"39.0000","long":"22.0000"},"gs":{"lat":"-54.5000","long":"-37.0000"},"gt":{"lat":"15.5000","long":"-90.2500"},"gu":{"lat":"13.4667","long":"144.7833"},"gw":{"lat":"12.0000","long":"-15.0000"},"gy":{"lat":"5.0000","long":"-59.0000"},"hk":{"lat":"22.2500","long":"114.1667"},"hm":{"lat":"-53.1000","long":"72.5167"},"hn":{"lat":"15.0000","long":"-86.5000"},"hr":{"lat":"45.1667","long":"15.5000"},"ht":{"lat":"19.0000","long":"-72.4167"},"hu":{"lat":"47.0000","long":"20.0000"},"id":{"lat":"-5.0000","long":"120.0000"},"ie":{"lat":"53.0000","long":"-8.0000"},"il":{"lat":"31.5000","long":"34.7500"},"in":{"lat":"20.0000","long":"77.0000"},"io":{"lat":"-6.0000","long":"71.5000"},"iq":{"lat":"33.0000","long":"44.0000"},"ir":{"lat":"32.0000","long":"53.0000"},"is":{"lat":"65.0000","long":"-18.0000"},"it":{"lat":"42.8333","long":"12.8333"},"jm":{"lat":"18.2500","long":"-77.5000"},"jo":{"lat":"31.0000","long":"36.0000"},"jp":{"lat":"36.0000","long":"138.0000"},"ke":{"lat":"1.0000","long":"38.0000"},"kg":{"lat":"41.0000","long":"75.0000"},"kh":{"lat":"13.0000","long":"105.0000"},"ki":{"lat":"1.4167","long":"173.0000"},"km":{"lat":"-12.1667","long":"44.2500"},"kn":{"lat":"17.3333","long":"-62.7500"},"kp":{"lat":"40.0000","long":"127.0000"},"kr":{"lat":"37.0000","long":"127.5000"},"kw":{"lat":"29.3375","long":"47.6581"},"ky":{"lat":"19.5000","long":"-80.5000"},"kz":{"lat":"48.0000","long":"68.0000"},"la":{"lat":"18.0000","long":"105.0000"},"lb":{"lat":"33.8333","long":"35.8333"},"lc":{"lat":"13.8833","long":"-61.1333"},"li":{"lat":"47.1667","long":"9.5333"},"lk":{"lat":"7.0000","long":"81.0000"},"lr":{"lat":"6.5000","long":"-9.5000"},"ls":{"lat":"-29.5000","long":"28.5000"},"lt":{"lat":"56.0000","long":"24.0000"},"lu":{"lat":"49.7500","long":"6.1667"},"lv":{"lat":"57.0000","long":"25.0000"},"ly":{"lat":"25.0000","long":"17.0000"},"ma":{"lat":"32.0000","long":"-5.0000"},"mc":{"lat":"43.7333","long":"7.4000"},"md":{"lat":"47.0000","long":"29.0000"},"me":{"lat":"42.0000","long":"19.0000"},"mg":{"lat":"-20.0000","long":"47.0000"},"mh":{"lat":"9.0000","long":"168.0000"},"mk":{"lat":"41.8333","long":"22.0000"},"ml":{"lat":"17.0000","long":"-4.0000"},"mm":{"lat":"22.0000","long":"98.0000"},"mn":{"lat":"46.0000","long":"105.0000"},"mo":{"lat":"22.1667","long":"113.5500"},"mp":{"lat":"15.2000","long":"145.7500"},"mq":{"lat":"14.6667","long":"-61.0000"},"mr":{"lat":"20.0000","long":"-12.0000"},"ms":{"lat":"16.7500","long":"-62.2000"},"mt":{"lat":"35.8333","long":"14.5833"},"mu":{"lat":"-20.2833","long":"57.5500"},"mv":{"lat":"3.2500","long":"73.0000"},"mw":{"lat":"-13.5000","long":"34.0000"},"mx":{"lat":"23.0000","long":"-102.0000"},"my":{"lat":"2.5000","long":"112.5000"},"mz":{"lat":"-18.2500","long":"35.0000"},"na":{"lat":"-22.0000","long":"17.0000"},"nc":{"lat":"-21.5000","long":"165.5000"},"ne":{"lat":"16.0000","long":"8.0000"},"nf":{"lat":"-29.0333","long":"167.9500"},"ng":{"lat":"10.0000","long":"8.0000"},"ni":{"lat":"13.0000","long":"-85.0000"},"nl":{"lat":"52.5000","long":"5.7500"},"no":{"lat":"62.0000","long":"10.0000"},"np":{"lat":"28.0000","long":"84.0000"},"nr":{"lat":"-0.5333","long":"166.9167"},"nu":{"lat":"-19.0333","long":"-169.8667"},"nz":{"lat":"-41.0000","long":"174.0000"},"om":{"lat":"21.0000","long":"57.0000"},"pa":{"lat":"9.0000","long":"-80.0000"},"pe":{"lat":"-10.0000","long":"-76.0000"},"pf":{"lat":"-15.0000","long":"-140.0000"},"pg":{"lat":"-6.0000","long":"147.0000"},"ph":{"lat":"13.0000","long":"122.0000"},"pk":{"lat":"30.0000","long":"70.0000"},"pl":{"lat":"52.0000","long":"20.0000"},"pm":{"lat":"46.8333","long":"-56.3333"},"pr":{"lat":"18.2500","long":"-66.5000"},"ps":{"lat":"32.0000","long":"35.2500"},"pt":{"lat":"39.5000","long":"-8.0000"},"pw":{"lat":"7.5000","long":"134.5000"},"py":{"lat":"-23.0000","long":"-58.0000"},"qa":{"lat":"25.5000","long":"51.2500"},"re":{"lat":"-21.1000","long":"55.6000"},"ro":{"lat":"46.0000","long":"25.0000"},"rs":{"lat":"44.0000","long":"21.0000"},"ru":{"lat":"60.0000","long":"100.0000"},"rw":{"lat":"-2.0000","long":"30.0000"},"sa":{"lat":"25.0000","long":"45.0000"},"sb":{"lat":"-8.0000","long":"159.0000"},"sc":{"lat":"-4.5833","long":"55.6667"},"sd":{"lat":"15.0000","long":"30.0000"},"se":{"lat":"62.0000","long":"15.0000"},"sg":{"lat":"1.3667","long":"103.8000"},"sh":{"lat":"-15.9333","long":"-5.7000"},"si":{"lat":"46.0000","long":"15.0000"},"sj":{"lat":"78.0000","long":"20.0000"},"sk":{"lat":"48.6667","long":"19.5000"},"sl":{"lat":"8.5000","long":"-11.5000"},"sm":{"lat":"43.7667","long":"12.4167"},"sn":{"lat":"14.0000","long":"-14.0000"},"so":{"lat":"10.0000","long":"49.0000"},"sr":{"lat":"4.0000","long":"-56.0000"},"st":{"lat":"1.0000","long":"7.0000"},"sv":{"lat":"13.8333","long":"-88.9167"},"sy":{"lat":"35.0000","long":"38.0000"},"sz":{"lat":"-26.5000","long":"31.5000"},"tc":{"lat":"21.7500","long":"-71.5833"},"td":{"lat":"15.0000","long":"19.0000"},"tf":{"lat":"-43.0000","long":"67.0000"},"tg":{"lat":"8.0000","long":"1.1667"},"th":{"lat":"15.0000","long":"100.0000"},"tj":{"lat":"39.0000","long":"71.0000"},"tk":{"lat":"-9.0000","long":"-172.0000"},"tm":{"lat":"40.0000","long":"60.0000"},"tn":{"lat":"34.0000","long":"9.0000"},"to":{"lat":"-20.0000","long":"-175.0000"},"tr":{"lat":"39.0000","long":"35.0000"},"tt":{"lat":"11.0000","long":"-61.0000"},"tv":{"lat":"-8.0000","long":"178.0000"},"tw":{"lat":"23.5000","long":"121.0000"},"tz":{"lat":"-6.0000","long":"35.0000"},"ua":{"lat":"49.0000","long":"32.0000"},"ug":{"lat":"1.0000","long":"32.0000"},"um":{"lat":"19.2833","long":"166.6000"},"us":{"lat":"38.0000","long":"-97.0000"},"uy":{"lat":"-33.0000","long":"-56.0000"},"uz":{"lat":"41.0000","long":"64.0000"},"va":{"lat":"41.9000","long":"12.4500"},"vc":{"lat":"13.2500","long":"-61.2000"},"ve":{"lat":"8.0000","long":"-66.0000"},"vg":{"lat":"18.5000","long":"-64.5000"},"vi":{"lat":"18.3333","long":"-64.8333"},"vn":{"lat":"16.0000","long":"106.0000"},"vu":{"lat":"-16.0000","long":"167.0000"},"wf":{"lat":"-13.3000","long":"-176.2000"},"ws":{"lat":"-13.5833","long":"-172.3333"},"ye":{"lat":"15.0000","long":"48.0000"},"yt":{"lat":"-12.8333","long":"45.1667"},"za":{"lat":"-29.0000","long":"24.0000"},"zm":{"lat":"-15.0000","long":"30.0000"},"zw":{"lat":"-20.0000","long":"30.0000"}, "Riyadh":{"lat":"24.7136","long":"46.6753"}, "Dubai":{"lat":"25.2048","long":"55.2708"}, "Moscow":{"lat":"55.7558","long":"37.6173"}, "Milan":{"lat":"45.4642","long":"9.1900"}, "Jeddah":{"lat":"21.2854","long":"39.2376"}, "Chicago":{"lat":"41.8781","long":"-87.6298"}, "SanFrancisco":{"lat":"37.7749","long":"-122.4194"}, "Toronto":{"lat":"43.6532","long":"-79.3832"}, "Sydney":{"lat":"-33.8688","long":"151.2093"}, "MexicoCity":{"lat":"19.4326","long":"-99.1332"}, "Cario":{"lat":"30.0444","long":"31.2357"}, "ClujNapoca":{"lat":"46.7712","long":"23.6236"}, "Boston":{"lat":"42.3601","long":"-71.0589"}}';
var list = '{"AF": {"name": "Afghanistan"},"AX": {"name": "Aland Islands"},"AL": {"name": "Albania"},"DZ": {"name": "Algeria"},"AS": {"name": "American Samoa"},"AD": {"name": "AndorrA"},"AO": {"name": "Angola"},"AI": {"name": "Anguilla"},"AQ": {"name": "Antarctica"},"AG": {"name": "Antigua and Barbuda"},"AR": {"name": "Argentina"},"AM": {"name": "Armenia"},"AW": {"name": "Aruba"},"AU": {"name": "Australia"},"AT": {"name": "Austria"},"AZ": {"name": "Azerbaijan"},"BS": {"name": "Bahamas"},"BH": {"name": "Bahrain"},"BD": {"name": "Bangladesh"},"BB": {"name": "Barbados"},"BY": {"name": "Belarus"},"BE": {"name": "Belgium"},"BZ": {"name": "Belize"},"BJ": {"name": "Benin"},"BM": {"name": "Bermuda"},"BT": {"name": "Bhutan"},"BO": {"name": "Bolivia"},"BA": {"name": "Bosnia and Herzegovina"},"BW": {"name": "Botswana"},"BV": {"name": "Bouvet Island"},"BR": {"name": "Brazil"},"IO": {"name": "British Indian Ocean Territory"},"BN": {"name": "Brunei Darussalam"},"BG": {"name": "Bulgaria"},"BF": {"name": "Burkina Faso"},"BI": {"name": "Burundi"},"KH": {"name": "Cambodia"},"CM": {"name": "Cameroon"},"CA": {"name": "Canada"},"CV": {"name": "Cape Verde"},"KY": {"name": "Cayman Islands"},"CF": {"name": "Central African Republic"},"TD": {"name": "Chad"},"CL": {"name": "Chile"},"CN": {"name": "China"},"CX": {"name": "Christmas Island"},"CC": {"name": "Cocos (Keeling) Islands"},"CO": {"name": "Colombia"},"KM": {"name": "Comoros"},"CG": {"name": "Congo"},"CD": {"name": "Congo"},"CK": {"name": "Cook Islands"},"CR": {"name": "Costa Rica"},"CI": {"name": "Cote D Ivoire"},"HR": {"name": "Croatia"},"CU": {"name": "Cuba"},"CY": {"name": "Cyprus"},"CZ": {"name": "Czech Republic"},"DK": {"name": "Denmark"},"DJ": {"name": "Djibouti"},"DM": {"name": "Dominica"},"DO": {"name": "Dominican Republic"},"EC": {"name": "Ecuador"},"EG": {"name": "Egypt"},"SV": {"name": "El Salvador"},"GQ": {"name": "Equatorial Guinea"},"ER": {"name": "Eritrea"},"EE": {"name": "Estonia"},"ET": {"name": "Ethiopia"},"FK": {"name": "Falkland Islands (Malvinas)"},"FO": {"name": "Faroe Islands"},"FJ": {"name": "Fiji"},"FI": {"name": "Finland"},"FR": {"name": "France"},"GF": {"name": "French Guiana"},"PF": {"name": "French Polynesia"},"TF": {"name": "French Southern Territories"},"GA": {"name": "Gabon"},"GM": {"name": "Gambia"},"GE": {"name": "Georgia"},"DE": {"name": "Germany"},"GH": {"name": "Ghana"},"GI": {"name": "Gibraltar"},"GR": {"name": "Greece"},"GL": {"name": "Greenland"},"GD": {"name": "Grenada"},"GP": {"name": "Guadeloupe"},"GU": {"name": "Guam"},"GT": {"name": "Guatemala"},"GG": {"name": "Guernsey"},"GN": {"name": "Guinea"},"GW": {"name": "Guinea-Bissau"},"GY": {"name": "Guyana"},"HT": {"name": "Haiti"},"HM": {"name": "Heard Island and Mcdonald Islands"},"VA": {"name": "Holy See (Vatican City State)"},"HN": {"name": "Honduras"},"HK": {"name": "Hong Kong"},"HU": {"name": "Hungary"},"IS": {"name": "Iceland"},"IN": {"name": "India"},"ID": {"name": "Indonesia"},"IR": {"name": "Iran, Islamic Republic Of"},"IQ": {"name": "Iraq"},"IE": {"name": "Ireland"},"IM": {"name": "Isle of Man"},"IL": {"name": "Israel"},"IT": {"name": "Italy"},"JM": {"name": "Jamaica"},"JP": {"name": "Japan"},"JE": {"name": "Jersey"},"JO": {"name": "Jordan"},"KZ": {"name": "Kazakhstan"},"KE": {"name": "Kenya"},"KI": {"name": "Kiribati"},"KP": {"name": "Korea Democratic People S Republic of"},"KR": {"name": "Korea Republic of"},"KW": {"name": "Kuwait"},"KG": {"name": "Kyrgyzstan"},"LA": {"name": "Lao People S Democratic Republic"},"LV": {"name": "Latvia"},"LB": {"name": "Lebanon"},"LS": {"name": "Lesotho"},"LR": {"name": "Liberia"},"LY": {"name": "Libya"},"LI": {"name": "Liechtenstein"},"LT": {"name": "Lithuania"},"LU": {"name": "Luxembourg"},"MO": {"name": "Macao"},"MK": {"name": "Macedonia, The Former Yugoslav Republic of"},"MG": {"name": "Madagascar"},"MW": {"name": "Malawi"},"MY": {"name": "Malaysia"},"MV": {"name": "Maldives"},"ML": {"name": "Mali"},"MT": {"name": "Malta"},"MH": {"name": "Marshall Islands"},"MQ": {"name": "Martinique"},"MR": {"name": "Mauritania"},"MU": {"name": "Mauritius"},"YT": {"name": "Mayotte"},"MX": {"name": "Mexico"},"FM": {"name": "Micronesia, Federated States of"},"MD": {"name": "Moldova, Republic of"},"MC": {"name": "Monaco"},"MN": {"name": "Mongolia"},"MS": {"name": "Montserrat"},"MA": {"name": "Morocco"},"MZ": {"name": "Mozambique"},"MM": {"name": "Myanmar"},"NA": {"name": "Namibia"},"NR": {"name": "Nauru"},"NP": {"name": "Nepal"},"NL": {"name": "Netherlands"},"AN": {"name": "Netherlands Antilles"},"NC": {"name": "New Caledonia"},"NZ": {"name": "New Zealand"},"NI": {"name": "Nicaragua"},"NE": {"name": "Niger"},"NG": {"name": "Nigeria"},"NU": {"name": "Niue"},"NF": {"name": "Norfolk Island"},"MP": {"name": "Northern Mariana Islands"},"NO": {"name": "Norway"},"OM": {"name": "Oman"},"PK": {"name": "Pakistan"},"PW": {"name": "Palau"},"PS": {"name": "Palestinian Territory, Occupied"},"PA": {"name": "Panama"},"PG": {"name": "Papua New Guinea"},"PY": {"name": "Paraguay"},"PE": {"name": "Peru"},"PH": {"name": "Philippines"},"PN": {"name": "Pitcairn"},"PL": {"name": "Poland"},"PT": {"name": "Portugal"},"PR": {"name": "Puerto Rico"},"QA": {"name": "Qatar"},"RE": {"name": "Reunion"},"RO": {"name": "Romania"},"RU": {"name": "Russian Federation"},"RW": {"name": "RWANDA"},"SH": {"name": "Saint Helena"},"KN": {"name": "Saint Kitts and Nevis"},"LC": {"name": "Saint Lucia"},"PM": {"name": "Saint Pierre and Miquelon"},"VC": {"name": "Saint Vincent and the Grenadines"},"WS": {"name": "Samoa"},"SM": {"name": "San Marino"},"ST": {"name": "Sao Tome and Principe"},"SA": {"name": "Saudi Arabia"},"SN": {"name": "Senegal"},"CS": {"name": "Serbia and Montenegro"},"SC": {"name": "Seychelles"},"SL": {"name": "Sierra Leone"},"SG": {"name": "Singapore"},"SK": {"name": "Slovakia"},"SI": {"name": "Slovenia"},"SB": {"name": "Solomon Islands"},"SO": {"name": "Somalia"},"ZA": {"name": "South Africa"},"GS": {"name": "South Georgia and the South Sandwich Islands"},"ES": {"name": "Spain"},"LK": {"name": "Sri Lanka"},"SD": {"name": "Sudan"},"SR": {"name": "Suriname"},"SJ": {"name": "Svalbard and Jan Mayen"},"SZ": {"name": "Swaziland"},"SE": {"name": "Sweden"},"CH": {"name": "Switzerland"},"SY": {"name": "Syrian Arab Republic"},"TW": {"name": "Taiwan, Province of China"},"TJ": {"name": "Tajikistan"},"TZ": {"name": "Tanzania, United Republic of"},"TH": {"name": "Thailand"},"TL": {"name": "Timor-Leste"},"TG": {"name": "Togo"},"TK": {"name": "Tokelau"},"TO": {"name": "Tonga"},"TT": {"name": "Trinidad and Tobago"},"TN": {"name": "Tunisia"},"TR": {"name": "Turkey"},"TM": {"name": "Turkmenistan"},"TC": {"name": "Turks and Caicos Islands"},"TV": {"name": "Tuvalu"},"UG": {"name": "Uganda"},"UA": {"name": "Ukraine"},"AE": {"name": "United Arab Emirates"},"GB": {"name": "United Kingdom"},"US": {"name": "United States"},"UM": {"name": "United States Minor Outlying Islands"},"UY": {"name": "Uruguay"},"UZ": {"name": "Uzbekistan"},"VU": {"name": "Vanuatu"},"VE": {"name": "Venezuela"},"VN": {"name": "Viet Nam"},"VG": {"name": "Virgin Islands, British"},"VI": {"name": "Virgin Islands, U.S."},"WF": {"name": "Wallis and Futuna"},"EH": {"name": "Western Sahara"},"YE": {"name": "Yemen"},"ZM": {"name": "Zambia"},"ZW": {"name": "Zimbabwe"}}';

var obj = JSON.parse(data);
var countries = JSON.parse(list);

var mouseX = 0, mouseY = 0;
$(document).mousemove(function(e){
   mouseX = e.pageX;
   mouseY = e.pageY; 
});


window.onload = function () {
        var current = null;
        var map = {};
        var m = {};       
        var attr = {
          fill: "#216799",
          stroke: "#1A527F",
          "stroke-width": .3,
          "stroke-linejoin": "round"
        };     

        var map = {};
        var width = document.getElementById('holder_1000').style.width;
        var height = document.getElementById('holder_1000').style.height * 0.99;

        var svgHeight = 400;
          var svgWidth = 1000;

        var R = Raphael("holder_1000", "100%", "100%");
        
        R.setViewBox(0, 0, svgWidth, svgHeight, true);

        render_map(R,map,attr);   
        for (var state in map) {                      
                  map[state].color = "#2799F4";
                  (function (st, state) {
            st[0].style.cursor = "pointer";
            st[0].onmouseover = function () {
              current && map[current].animate({fill: "#216799",stroke: "#1A527F"}, 300);
              st.animate({fill: st.color, stroke: "#ccc"}, 300);
              R.safari();
              current = state;

              $('.popup').css({left:mouseX, top:mouseY});
              $('.popup').text(countries[current].name); 
              $('.popup').fadeIn(100);


            };
            st[0].onmouseout = function () {
              
              $('.popup').css('display', "none");  
              st.animate({fill: "#216799",stroke: "#1A527F"}, 300);
              R.safari();

            };
            
            st[0].onclick = function () {
              console.log(state);
              var key = state.toLowerCase();
       
              $('#lat').val(obj[key].lat);
              $('#lng').val(obj[key].long);

              $('html, body').animate({
                  scrollTop: $(".answers").offset().top
              }, 750);

            };
          })(map[state], state);
        }; // end for
      

        function lon2x(lon) {
          var xfactor = 2.752;
          var xoffset = 473.75;
          var x = (lon * xfactor) + xoffset;
          return x;
        }
        function lat2y(lat) {
          var yfactor = -2.753;
          var yoffset = 231;
          var y = (lat * yfactor) + yoffset;
          return y;
        }

        var cities = {};

        var city_attr = {
          fill: "#91A3BE",
          stroke: "none",
          opacity: .6
        };
        function plot(lat,lon,size) {
          size = size * .5 + 4;
          return R.circle(lon2x(lon), lat2y(lat), size).attr(city_attr);
        }

            cities.Riyadh = plot(obj.Riyadh.lat, obj.Riyadh.long,6);
            cities.Dubai = plot(obj.Dubai.lat, obj.Dubai.long,1);

            cities.Moscow = plot(obj.Moscow.lat, obj.Moscow.long,20);
            cities.Milan = plot(obj.Milan.lat, obj.Milan.long ,2);

            cities.Jeddah = plot(obj.Jeddah.lat, obj.Jeddah.long,1);
            cities.Chicago = plot(obj.Chicago.lat, obj.Chicago.long,20);

            cities.SanFrancisco = plot(obj.SanFrancisco.lat, obj.SanFrancisco.long,6);
            cities.Toronto = plot(obj.Toronto.lat, obj.Toronto.long,3);
            
            cities.Sydney = plot(obj.Sydney.lat, obj.Sydney.long,15);
            cities.MexicoCity = plot(obj.MexicoCity.lat,obj.MexicoCity.long,3);

            cities.Cario = plot(obj.Cario.lat,obj.Cario.long, 5);
            cities.ClujNapoca = plot(obj.ClujNapoca.lat, obj.ClujNapoca.long,4);
            cities.Boston = plot(obj.Boston.lat, obj.Boston.long, 15);

        var current_city = null;
        var city_box = null;

        for (var city in cities) {                      
                  map[state].color = Raphael.getColor();
                  (function (st, city) {
            st[0].style.cursor = "pointer";
            st[0].onmouseover = function () {
              current_city && cities[current_city].animate({fill: "#91A3BE", opacity: .6}, 300);
              st.animate({fill: "#91A3BE", opacity: 1}, 300);
              R.safari();
              current_city = city;

              $('.popup').css({left:mouseX, top:mouseY});
              $('.popup').text(city); 
              $('.popup').fadeIn(100); 

            };
            st[0].onmouseout = function () {

              $('.popup').css('display', "none");  
              st.animate({fill: "#91A3BE", opacity: .6}, 300);
              R.safari();
            };
            
            st[0].onclick = function () {
              if (t = document.getElementById(city_box)) { t.style.display = "none"; }
              if (t = document.getElementById(city)) { t.style.display = "block"; }
              key = city;

              $('#lat').val(obj[key].lat);
              $('#lng').val(obj[key].long);


              $('html, body').animate({
                  scrollTop: $(".answers").offset().top
              }, 750);

            };

            if (t = document.getElementById(city)) {
                t.style.left = cities[city].attr('cx') + 'px';
                t.style.top = cities[city].attr('cy') -20 + 'px';
            }

          })(cities[city], city);
        }; // end for
      };


      
      $('#arrow').click( ()=>{
        $('html, body').animate({
                    scrollTop: $(".answers").offset().top
                }, 750);
      });